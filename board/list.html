<div class="container" style="max-width:800px; margin:auto; background:#fff; padding:30px; border-radius:12px; box-shadow:0 4px 10px rgba(0,0,0,0.1); font-family:'Segoe UI', sans-serif;">
  <h1 style="text-align:center; color:#333; margin-bottom:25px;">ğŸ“‹ ê²Œì‹œíŒ ëª©ë¡</h1>
  
  <div id="postList"></div>

  <div style="text-align:center; margin-top:30px;">
    <a href="#" id="goToWrite" style="padding:12px 20px; background:#007bff; color:white; text-decoration:none; border-radius:8px; font-weight:bold;">âœï¸ ê¸€ ì‘ì„±í•˜ê¸°</a>
  </div>
</div>

<script>
  function formatDate(isoString) {
    const date = new Date(isoString);
    return date.toLocaleString('ko-KR', {
      year: 'numeric',
      month: '2-digit',
      day: '2-digit',
      hour: '2-digit',
      minute: '2-digit'
    });
  }

  function loadPosts() {
    const postList = document.getElementById('postList');
    const posts = JSON.parse(localStorage.getItem('posts') || '[]');

    if (posts.length === 0) {
      postList.innerHTML = '<p style="text-align:center; color:#777;">ì‘ì„±ëœ ê¸€ì´ ì—†ìŠµë‹ˆë‹¤.</p>';
      return;
    }

    postList.innerHTML = '';

    posts.forEach(post => {
      const wrapper = document.createElement('div');
      wrapper.style.borderBottom = '1px solid #eee';
      wrapper.style.padding = '20px 0';

      wrapper.innerHTML = `
        <h3 class="post-title" style="margin:0; color:#007bff; cursor:pointer;" data-id="${post.id}">
          ${post.title}
        </h3>
        <p style="margin:5px 0 10px; color:#555; font-size:14px;">
          ì‘ì„±ì¼: ${post.createdAt ? formatDate(post.createdAt) : 'ì•Œ ìˆ˜ ì—†ìŒ'}
        </p>
        <div class="post-content" style="display:none; margin-bottom:10px; color:#444; line-height:1.6;">
          ${post.content.replace(/\n/g, '<br/>')}
        </div>
        <div class="post-actions" style="display:none; margin-bottom:10px;">
          <button class="edit-btn" data-id="${post.id}" style="margin-right:10px; padding:6px 12px; background:#ffc107; color:#333; border:none; border-radius:4px; cursor:pointer;">ìˆ˜ì •</button>
          <button class="delete-btn" data-id="${post.id}" style="padding:6px 12px; background:#dc3545; color:white; border:none; border-radius:4px; cursor:pointer;">ì‚­ì œ</button>
        </div>
      `;

      postList.appendChild(wrapper);
    });

    // ì œëª© í´ë¦­ â†’ ë‚´ìš© í† ê¸€
    document.querySelectorAll('.post-title').forEach(title => {
      title.addEventListener('click', () => {
        const content = title.parentElement.querySelector('.post-content');
        const actions = title.parentElement.querySelector('.post-actions');
        const isVisible = content.style.display === 'block';
        content.style.display = isVisible ? 'none' : 'block';
        actions.style.display = isVisible ? 'none' : 'block';
      });
    });

    // ì‚­ì œ ë²„íŠ¼
    document.querySelectorAll('.delete-btn').forEach(button => {
      button.addEventListener('click', () => {
        const id = parseInt(button.getAttribute('data-id'));
        let posts = JSON.parse(localStorage.getItem('posts') || '[]');
        posts = posts.filter(p => p.id !== id);
        localStorage.setItem('posts', JSON.stringify(posts));
        alert('ê¸€ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
        loadPosts(); // ëª©ë¡ ë‹¤ì‹œ ë¡œë“œ
      });
    });

    // ìˆ˜ì • ë²„íŠ¼
    document.querySelectorAll('.edit-btn').forEach(button => {
      button.addEventListener('click', () => {
        const id = parseInt(button.getAttribute('data-id'));
        const posts = JSON.parse(localStorage.getItem('posts') || '[]');
        const post = posts.find(p => p.id === id);
        if (!post) return;

        // ìˆ˜ì •í•  ê¸€ì„ ì„¸ì…˜ìŠ¤í† ë¦¬ì§€ì— ì„ì‹œ ì €ì¥
        sessionStorage.setItem('editPost', JSON.stringify(post));

        // ê¸€ì“°ê¸° í˜ì´ì§€ë¡œ ì´ë™
        loadPage('board/write.html');
      });
    });
  }

  document.getElementById('goToWrite').addEventListener('click', e => {
    e.preventDefault();
    sessionStorage.removeItem('editPost'); // ìƒˆ ê¸€ ì‘ì„±ì„ ìœ„í•œ ì´ˆê¸°í™”
    loadPage('board/write.html');
  });

  loadPosts(); // ì´ˆê¸° ì‹¤í–‰
</script>





