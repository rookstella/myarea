<style>
  .login-container {
    max-width: 400px;
    margin: 50px auto;
    padding: 40px;
    background: white;
    border-radius: 16px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    text-align: center;
  }

  .login-container h2 {
    color: #333;
    margin-bottom: 30px;
    font-size: 28px;
    font-weight: 300;
  }

  .login-container form {
    display: flex;
    flex-direction: column;
    gap: 20px;
  }

  .login-container input {
    padding: 15px 20px;
    border: 2px solid #e1e5e9;
    border-radius: 8px;
    font-size: 16px;
    transition: border-color 0.3s ease;
    outline: none;
  }

  .login-container input:focus {
    border-color: #007bff;
  }

  .login-container button {
    padding: 15px;
    background: linear-gradient(135deg, #007bff, #0056b3);
    color: white;
    border: none;
    border-radius: 8px;
    font-size: 16px;
    font-weight: 500;
    cursor: pointer;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
  }

  .login-container button:hover {
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(0, 123, 255, 0.3);
  }

  .login-container .error {
    color: #dc3545;
    font-size: 14px;
    margin-top: 10px;
  }

  .login-links {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: 20px;
    gap: 20px;
  }

  .login-container a {
    color: #007bff;
    text-decoration: none;
    font-size: 14px;
    transition: color 0.3s ease;
  }

  .login-container a:hover {
    color: #0056b3;
  }

  .find-account {
    display: flex;
    gap: 10px;
  }

  .find-account a {
    font-size: 13px;
    opacity: 0.8;
  }

  @media (max-width: 480px) {
    .login-container {
      margin: 20px;
      padding: 30px 20px;
    }
  }
</style>

<div class="login-container">
  <h2>로그인</h2>
  <form id="loginForm">
    <input type="text" id="username" placeholder="아이디" required />
    <input type="password" id="password" placeholder="비밀번호" required />
    <button type="submit">로그인</button>
    <p id="errorMessage" class="error" style="display:none;"></p>
  </form>
  <div class="login-links">
    <a href="#" data-page="member/signup.html">가입하기</a>
    <div class="find-account">
      <a href="#" onclick="alert('계정찾기 기능은 준비중입니다.'); return false;">계정찾기</a>
      <span style="color: #ccc;">|</span>
      <a href="#" onclick="alert('비밀번호 찾기 기능은 준비중입니다.'); return false;">비밀번호 찾기</a>
    </div>
  </div>
</div>

<script>
  const loginForm = document.getElementById("loginForm");
  const errorMessage = document.getElementById("errorMessage");

  loginForm.addEventListener("submit", function(e) {
    e.preventDefault();

    const username = document.getElementById("username").value.trim();
    const password = document.getElementById("password").value.trim();
    const users = JSON.parse(localStorage.getItem('users')) || [];

     // ✅ 관리자 강제 로그인 처리
  if (username === "admin" && password === "1234") {
    // admin 계정을 localStorage에 등록 (없을 경우)
    let adminUser = users.find(u => u.username === "admin");

    if (!adminUser) {
      adminUser = {
        username: "admin",
        password: "1234",
        isAdmin: true,
        approved: true
      };
      users.push(adminUser);
      localStorage.setItem('users', JSON.stringify(users));
    } else {
      // 기존 admin 계정이 있다면 isAdmin과 approved 강제 부여
      adminUser.isAdmin = true;
      adminUser.approved = true;
      localStorage.setItem('users', JSON.stringify(users));
    }

    // 세션에 로그인 정보 저장
    sessionStorage.setItem('loggedInUser', "admin");

    alert("관리자(admin)로 로그인되었습니다.");

    // 로그인 후 UI 업데이트 및 페이지 이동
    if (typeof updateLoginStatus === 'function') updateLoginStatus();
    if (typeof loadPage === 'function') loadPage('member/user-management.html');
    else location.href = '../member/user-management.html';

    return;
  }

    // 승인된 사용자만 로그인 가능
    const user = users.find(u => u.username === username && u.password === password && u.approved === true);

    if (user) {
      sessionStorage.setItem('loggedInUser', username);

      // ✅ 로그인 상태 반영 (메뉴 갱신: 회원관리 보이고, 로그인 숨기기 등)
      if (typeof updateLoginStatus === 'function') {
        updateLoginStatus();
      }

      alert(`${username}님, 환영합니다!`);

      // ✅ 로그인 성공 후 게시판으로 이동
      if (typeof loadPage === 'function') {
        loadPage('board/list.html');
      } else {
        location.href = '../board/list.html'; // fallback
      }

    } else {
      errorMessage.textContent = "아이디 또는 비밀번호가 올바르지 않거나 승인되지 않은 회원입니다.";
      errorMessage.style.display = 'block';
    }
  });
</script>